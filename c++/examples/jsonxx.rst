.. _jsonxx_examples:

json++
======

JSON++ is a light-weight JSON parser, writer and reader written in C++. JSON++ can also convert JSON documents into lossless XML documents.

The main block is `here <https://www.biicode.com/david/david/jsonxx/master>`_, which is generated from this `github repo <https://github.com/davidsanfal/jsonxx>`_

Simple parser and converter from JSON to XML 
--------------------------------------------

This example is `already in biicode <http://www.biicode.com/examples/jsonxx>`_, it is very simple to build it, by just opening the block and building it.

.. code-block:: bash

   $ bii init jsonxx
   $ cd jsonxx
   $ bii open examples/jsonxx
   $ bii cpp:build

The code of the example is like this:

.. code-block:: cpp

  include "david/jsonxx/jsonxx.h"
  using namespace jsonxx;
  using namespace std;

  int main() {
      #define QUOTE(...) #__VA_ARGS__
      string input = QUOTE(
      {
        "name/surname":"John Smith",
        'alias': 'Joe',
        "address": {
          "streetAddress": "21 2nd Street",
          "city": "New York",
          "state": "NY",
          "postal-code": 10021,
        },
        "phoneNumbers": [
          "212 555-1111",
          "212 555-2222",
        ],
        "additionalInfo": null,
        "remote": false,
        "height": 62.4,
        "ficoScore": " > 640",
      }
      );

      Object o;
      if( o.parse(input) ) {
          cout << o.xml(JSONx) << endl;            // XML output, JSONx flavor
          cout << o.xml(JXML) << endl;             // XML output, JXML flavor
          cout << o.xml(JXMLex) << endl;           // XML output, JXMLex flavor
          cout << o.xml(TaggedXML) << endl;        // XML output, tagged XML flavor
      }
      return 0;
  }

Now, run the hello example.

.. code-block:: bash

   $ bin/examples_tinythread_hello

You can see four diferent XML in the output:

.. code-block:: text

  <?xml version="1.0" encoding="UTF-8"?><!-- generated by jsonxx 0.22-a -->
  <json:object xsi:schemaLocation="http://www.datapower.com/schemas/json jsonx.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
          <json:null name="additionalInfo" />
          <json:object name="address">
                  <json:string name="city">New York</json:string>
                  <json:number name="postal-code">10021</json:number>
                  <json:string name="state">NY</json:string>
                  <json:string name="streetAddress">21 2nd Street</json:string>
          </json:object>
          <json:string name="alias">Joe</json:string>
          <json:string name="ficoScore"> &gt; 640</json:string>
          <json:number name="height">62.4</json:number>
          <json:string name="name\/surname">John Smith</json:string>
          <json:array name="phoneNumbers">
                  <json:string>212 555-1111</json:string>
                  <json:string>212 555-2222</json:string>
          </json:array>
          <json:boolean name="remote">false</json:boolean>
  </json:object>

.. code-block:: text

  <?xml version="1.0" encoding="UTF-8"?><!-- generated by jsonxx 0.22-a -->
  <j son="o">
          <j son="0:additionalInfo" />
          <j son="o:address">
                  <j son="s:city">New York</j>
                  <j son="n:postal-code">10021</j>
                  <j son="s:state">NY</j>
                  <j son="s:streetAddress">21 2nd Street</j>
          </j>
          <j son="s:alias">Joe</j>
          <j son="s:ficoScore"> &gt; 640</j>
          <j son="n:height">62.4</j>
          <j son="s:name\/surname">John Smith</j>
          <j son="a:phoneNumbers">
                  <j son="s">212 555-1111</j>
                  <j son="s">212 555-2222</j>
          </j>
          <j son="b:remote">false</j>
  </j>

.. code-block:: text

  <?xml version="1.0" encoding="UTF-8"?><!-- generated by jsonxx 0.22-a -->
  <j son="o">
          <j son="0:additionalInfo" additionalInfo="" />
          <j son="o:address" address="">
                  <j son="s:city" city="New York">New York</j>
                  <j son="n:postal-code" postal_code="10021">10021</j>
                  <j son="s:state" state="NY">NY</j>
                  <j son="s:streetAddress" streetAddress="21 2nd Street">21 2nd Street</j>
          </j>
          <j son="s:alias" alias="Joe">Joe</j>
          <j son="s:ficoScore" ficoScore=" &gt; 640"> &gt; 640</j>
          <j son="n:height" height="62.4">62.4</j>
          <j son="s:name\/surname" name_surname="John Smith">John Smith</j>
          <j son="a:phoneNumbers" phoneNumbers="">
                  <j son="s">212 555-1111</j>
                  <j son="s">212 555-2222</j>
          </j>
          <j son="b:remote" remote="false">false</j>
  </j>

.. code-block:: text

  <?xml version="1.0" encoding="UTF-8"?><!-- generated by jsonxx 0.22-a -->
  <JsonItem type="json:object">
          <additionalInfo type="json:null" name="additionalInfo" />
          <address type="json:object" name="address">
                  <city type="json:string" name="city">New York</city>
                  <postal_code type="json:number" name="postal-code">10021</postal_code>
                  <state type="json:string" name="state">NY</state>
                  <streetAddress type="json:string" name="streetAddress">21 2nd Street</streetAddress>
          </address>
          <alias type="json:string" name="alias">Joe</alias>
          <ficoScore type="json:string" name="ficoScore"> &gt; 640</ficoScore>
          <height type="json:number" name="height">62.4</height>
          <name_surname type="json:string" name="name\/surname">John Smith</name_surname>
          <phoneNumbers type="json:array" name="phoneNumbers">
                  <JsonItem type="json:string">212 555-1111</JsonItem>
                  <JsonItem type="json:string">212 555-2222</JsonItem>
          </phoneNumbers>
          <remote type="json:boolean" name="remote">false</remote>
  </JsonItem>